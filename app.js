const _0x1524f1=_0x2a32;(function(_0x440cd9,_0x1eafb0){const _0x540c9f=_0x2a32,_0x5a6138=_0x440cd9();while(!![]){try{const _0x6d0ea8=parseInt(_0x540c9f(0x1c3))/0x1+parseInt(_0x540c9f(0x1fa))/0x2+-parseInt(_0x540c9f(0x1e6))/0x3+parseInt(_0x540c9f(0x1e4))/0x4+parseInt(_0x540c9f(0x1f6))/0x5*(-parseInt(_0x540c9f(0x1f2))/0x6)+-parseInt(_0x540c9f(0x1c5))/0x7+parseInt(_0x540c9f(0x1e8))/0x8;if(_0x6d0ea8===_0x1eafb0)break;else _0x5a6138['push'](_0x5a6138['shift']());}catch(_0x26bb06){_0x5a6138['push'](_0x5a6138['shift']());}}}(_0x4427,0x5c162));const SHEET_URL=_0x1524f1(0x1ca),STORAGE_KEY='konzia-myList';let catalog=[],myList=[];const watchers={};function saveList(){localStorage['setItem'](STORAGE_KEY,JSON['stringify'](myList['map'](({id:_0x57273c,name:_0x4778a6,priceInfo:_0x3c8645})=>({'id':_0x57273c,'name':_0x4778a6,'priceInfo':_0x3c8645}))));}function loadList(){const _0xec782d=_0x1524f1;try{const _0x1f6009=localStorage[_0xec782d(0x1ee)](STORAGE_KEY);return _0x1f6009?JSON[_0xec782d(0x1fe)](_0x1f6009)['map'](({id:_0x4a9a92,name:_0x46558a,priceInfo:_0x37b384})=>{const _0x3a03e1=_0xec782d,_0x49cbbf=catalog[_0x3a03e1(0x1c6)](_0x116fd2=>_0x116fd2['id']===_0x4a9a92);return _0x49cbbf?{..._0x49cbbf,'priceInfo':_0x37b384}:null;})[_0xec782d(0x1f7)](Boolean):[];}catch{return[];}}async function getCatalog(){const _0x3dfb5b=_0x1524f1,_0x321dd9=await fetch(SHEET_URL),_0x1677fb=await _0x321dd9[_0x3dfb5b(0x1ef)]();return _0x1677fb[_0x3dfb5b(0x1de)]||[];}async function getPrice(_0x5c8155){const _0x229d01=_0x1524f1,_0x3c32d4=await fetch(SHEET_URL+_0x229d01(0x209)+encodeURIComponent(_0x5c8155));return _0x3c32d4[_0x229d01(0x1ef)]();}function _0x4427(){const _0xcae715=['getElementById','createElement','\x20–\x20R','app','closest','getItem','json','querySelectorAll','total','198684upPkAt','cheapestPrice','btn\x20remove-btn','className','15KKxBTF','filter','click','trim','542916kNRVKk','min','textContent','Added','parse','createTextNode','empty','Total:\x20R','appendChild','some','.tab','Price\x20drop!\x20','priceRange','name','button[data-id]','?product=','push','string','price','length','\x20is\x20now\x20R','220964LTdHQF','priceInfo','4750858DHrzpQ','find','fade-out','Your\x20list\x20is\x20empty.','replaceChildren','https://script.google.com/macros/s/AKfycbwWlfeN4OijCyUvL4FCdcwDY10ZYnERuKV0E3cDZ-VZH1WFxEErFusOi3nzld3WKbb0aw/exec','No\x20products\x20in\x20sheet\x20yet.','classList','dataset','disabled','target','assign','.tab.active','add','hidden','forEach','card','list','active','\x20(was\x20R','cheapestStore','addEventListener','info','Remove','Range:\x20R','products','reduce','Add','\x20at\x20','button','add-btn','1897912GjpUOI','catalog','2224770LVrxnw','div','7439296CFcJOf'];_0x4427=function(){return _0xcae715;};return _0x4427();}function make(_0x115aeb,_0x3276e6={},..._0x5da7f8){const _0x4e3da6=_0x1524f1,_0x6cc6cd=document[_0x4e3da6(0x1ea)](_0x115aeb);return Object[_0x4e3da6(0x1d0)](_0x6cc6cd,_0x3276e6),_0x5da7f8['forEach'](_0x21df37=>_0x6cc6cd[_0x4e3da6(0x202)](typeof _0x21df37===_0x4e3da6(0x1bf)?document[_0x4e3da6(0x1ff)](_0x21df37):_0x21df37)),_0x6cc6cd;}function renderCatalog(){const _0x1688f0=_0x1524f1,_0x3dc2ab=document['getElementById'](_0x1688f0(0x1e5));_0x3dc2ab[_0x1688f0(0x1c9)]();if(!catalog[_0x1688f0(0x1c1)]){_0x3dc2ab[_0x1688f0(0x202)](make(_0x1688f0(0x1e7),{'className':_0x1688f0(0x200)},_0x1688f0(0x1cb)));return;}catalog[_0x1688f0(0x1d4)](_0x17a336=>{const _0x106a76=_0x1688f0,_0x5b2c87=myList[_0x106a76(0x203)](_0x3ea463=>_0x3ea463['id']===_0x17a336['id']),_0x4b2191=make(_0x106a76(0x1e2),{'className':'btn\x20'+(_0x5b2c87?'remove-btn':_0x106a76(0x1e3)),'dataset':{'id':_0x17a336['id']}},_0x5b2c87?_0x106a76(0x1fd):_0x106a76(0x1e0));_0x3dc2ab[_0x106a76(0x202)](make(_0x106a76(0x1e7),{'className':_0x106a76(0x1d5)},make('div',{'className':'info'},make('h4',{},_0x17a336[_0x106a76(0x207)])),_0x4b2191));});}function renderList(){const _0x4ffe33=_0x1524f1,_0x1515c3=document[_0x4ffe33(0x1e9)](_0x4ffe33(0x1d6));_0x1515c3[_0x4ffe33(0x1c9)]();if(!myList['length']){_0x1515c3[_0x4ffe33(0x202)](make('div',{'className':'empty'},_0x4ffe33(0x1c8))),updateTotal(0x0);return;}myList['forEach'](_0x57e8c0=>{const _0x3e97a3=_0x4ffe33,_0x29e749=_0x57e8c0[_0x3e97a3(0x1c4)];_0x1515c3[_0x3e97a3(0x202)](make(_0x3e97a3(0x1e7),{'className':_0x3e97a3(0x1d5)},make(_0x3e97a3(0x1e7),{'className':_0x3e97a3(0x1db)},make('h4',{},_0x57e8c0[_0x3e97a3(0x207)]),make(_0x3e97a3(0x1e7),{'className':_0x3e97a3(0x1c0)},'Avg:\x20R'+_0x29e749['avgPrice'],make('br'),'Cheapest:\x20',make('b',{},_0x29e749[_0x3e97a3(0x1d9)]+_0x3e97a3(0x1eb)+_0x29e749[_0x3e97a3(0x1f3)]),make('br'),_0x3e97a3(0x1dd)+_0x29e749[_0x3e97a3(0x206)][_0x3e97a3(0x1fb)]+_0x3e97a3(0x1eb)+_0x29e749[_0x3e97a3(0x206)]['max'])),make(_0x3e97a3(0x1e2),{'className':_0x3e97a3(0x1f4),'dataset':{'id':_0x57e8c0['id']}},_0x3e97a3(0x1dc))));});const _0x12a3ce=myList[_0x4ffe33(0x1df)]((_0x247404,_0x28c1b6)=>_0x247404+parseFloat(_0x28c1b6[_0x4ffe33(0x1c4)]['cheapestPrice']),0x0);updateTotal(_0x12a3ce);}function updateTotal(_0x4194b9){const _0x10c216=_0x1524f1;document['getElementById'](_0x10c216(0x1f1))[_0x10c216(0x1fc)]=_0x10c216(0x201)+_0x4194b9['toFixed'](0x2);}function startWatcher(_0xe6bae9){if(watchers[_0xe6bae9['id']])return;watchers[_0xe6bae9['id']]=setInterval(async()=>{const _0x47d77b=_0x2a32,_0x21f02e=await getPrice(_0xe6bae9[_0x47d77b(0x207)]),_0x323503=parseFloat(_0xe6bae9[_0x47d77b(0x1c4)]['cheapestPrice']),_0x3f8065=parseFloat(_0x21f02e[_0x47d77b(0x1f3)]);_0x3f8065<_0x323503&&(alert(_0x47d77b(0x205)+_0xe6bae9['name']+_0x47d77b(0x1c2)+_0x3f8065+_0x47d77b(0x1e1)+_0x21f02e[_0x47d77b(0x1d9)]+_0x47d77b(0x1d8)+_0x323503+')'),_0xe6bae9[_0x47d77b(0x1c4)]=_0x21f02e,saveList(),renderList());},0xf*0x3c*0x3e8);}function stopWatcher(_0x5a8734){watchers[_0x5a8734]&&(clearInterval(watchers[_0x5a8734]),delete watchers[_0x5a8734]);}function _0x2a32(_0x58c4c0,_0x206a90){const _0x44279f=_0x4427();return _0x2a32=function(_0x2a3251,_0x1573a4){_0x2a3251=_0x2a3251-0x1bf;let _0x4b7a37=_0x44279f[_0x2a3251];return _0x4b7a37;},_0x2a32(_0x58c4c0,_0x206a90);}document[_0x1524f1(0x1da)](_0x1524f1(0x1f8),async _0x585d68=>{const _0x3a753c=_0x1524f1,_0x4ff978=_0x585d68[_0x3a753c(0x1cf)][_0x3a753c(0x1ed)](_0x3a753c(0x208));if(!_0x4ff978)return;const _0x4e6033=_0x4ff978['dataset']['id'],_0x1cb922=catalog['find'](_0x2e6c8b=>_0x2e6c8b['id']===_0x4e6033)||myList[_0x3a753c(0x1c6)](_0x2c0dac=>_0x2c0dac['id']===_0x4e6033);if(!_0x1cb922)return;if(_0x4ff978[_0x3a753c(0x1fc)][_0x3a753c(0x1f9)]()===_0x3a753c(0x1e0)){_0x4ff978[_0x3a753c(0x1ce)]=!![],_0x4ff978[_0x3a753c(0x1fc)]='…';const _0x39011b=await getPrice(_0x1cb922[_0x3a753c(0x207)]);myList[_0x3a753c(0x20a)]({..._0x1cb922,'priceInfo':_0x39011b}),saveList(),_0x4ff978['textContent']=_0x3a753c(0x1fd),_0x4ff978[_0x3a753c(0x1f5)]='btn\x20remove-btn',_0x4ff978['disabled']=![],startWatcher(myList['at'](-0x1));if(activeTab===_0x3a753c(0x1d6))renderList();}else myList=myList[_0x3a753c(0x1f7)](_0x563745=>_0x563745['id']!==_0x4e6033),saveList(),stopWatcher(_0x4e6033),renderCatalog(),renderList();});let activeTab=_0x1524f1(0x1e5);document[_0x1524f1(0x1f0)](_0x1524f1(0x204))['forEach'](_0x55ba64=>_0x55ba64[_0x1524f1(0x1da)](_0x1524f1(0x1f8),()=>{const _0x54dfcd=_0x1524f1;document['querySelector'](_0x54dfcd(0x1d1))['classList']['remove'](_0x54dfcd(0x1d7)),_0x55ba64[_0x54dfcd(0x1cc)][_0x54dfcd(0x1d2)]('active'),document[_0x54dfcd(0x1f0)]('.content')['forEach'](_0x5c5d40=>_0x5c5d40[_0x54dfcd(0x1d3)]=!![]);const _0x32b6fc=_0x55ba64[_0x54dfcd(0x1cd)]['tab'];document[_0x54dfcd(0x1e9)](_0x32b6fc)[_0x54dfcd(0x1d3)]=![],activeTab=_0x32b6fc;if(_0x32b6fc===_0x54dfcd(0x1d6))renderList();})),((async()=>{const _0xf118bb=_0x1524f1;catalog=await getCatalog(),myList=loadList(),renderCatalog(),myList['forEach'](startWatcher);const _0x479a6d=document[_0xf118bb(0x1e9)]('loadingScreen'),_0x283bdd=document['getElementById'](_0xf118bb(0x1ec));_0x479a6d[_0xf118bb(0x1cc)]['add'](_0xf118bb(0x1c7)),_0x283bdd[_0xf118bb(0x1d3)]=![];})());
